version: 2
jobs:
    "firebase-job":
      docker:
        - image: circleci/node:8.10
      working_directory: /tmp/bitparking-tcc
      steps:
        - run:
            name: Realizando Deploy para o firebaseApp
            command: ./node_modules/.bin/firebase deploy --token=FIREBASE_DEPLOY_TOKEN

workflows:
  version: 2

  -deploy:
    jobs:
      - build-job
      - deploy-job:
        requires:
          - build-job
        filters:
          branches:
            only: master
steps:
  - checkout

  # Download and cache dependencies
  - restore_cache:
      keys:
      - v1-dependencies-{{ checksum "package.json" }}
      # fallback to using the latest cache if no exact match is found
      - v1-dependencies-

  - run: npm install

  - save_cache:
      paths:
        - node_modules
      key: v1-dependencies-{{ checksum "package.json" }}